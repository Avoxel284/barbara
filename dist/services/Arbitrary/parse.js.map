{"version":3,"file":"parse.js","sourceRoot":"","sources":["../../../src/services/Arbitrary/parse.ts"],"names":[],"mappings":";;;AAKA,mCAA4E;AAC5E,yCAA0C;AAE1C,SAAgB,uBAAuB,CAAC,IAAS;IAChD,IAAA,eAAQ,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACpB,OAAO,IAAI,gBAAU,CAAC;QACrB,IAAI,EACH,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK;YACzB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,sCAAsC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,GAAG;QACT,GAAG,EAAE,IAAI,CAAC,GAAG;QACb,SAAS,EAAE,EAAE;QAEb,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC;QACxC,IAAI,EAAE,KAAK;QACX,OAAO,EAAE,aAAO,CAAC,SAAS;QAC1B,KAAK,EAAE;YACN;gBACC,GAAG,EAAE,IAAI,CAAC,GAAG;gBAEb,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC;gBACtC,QAAQ,EAAE,aAAa;gBACvB,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ;gBACtC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK;aAChC;SACD;QACD,MAAM,EAAE;YACP,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,IAAI,UAAU;SAC9C;QACD,YAAY,EAAE,IAAI;KAClB,CAAC,CAAC;AACJ,CAAC;AA5BD,0DA4BC","sourcesContent":["/**\r\n * Avoxel284 2022\r\n * Barbara Music Module / Arbitrary\r\n */\r\n\r\nimport { BarbaraType, MusicPlaylist, MusicTrack, Service } from \"../../lib\";\r\nimport { debugLog } from \"../../lib/util\";\r\n\r\nexport function MusicTrackFromAudioFile(data: any) {\r\n\tdebugLog(data.meta);\r\n\treturn new MusicTrack({\r\n\t\tname:\r\n\t\t\tdata?.meta?.common?.title ||\r\n\t\t\tdata.url.match(/[^/\\\\&\\?]+\\.\\w{3,4}(?=([\\?&].*$|$))/g)?.[0] ||\r\n\t\t\tdata.url,\r\n\t\turl: data.url,\r\n\t\tthumbnail: \"\",\r\n\t\t// thumbnail: Buffer.from(meta?.common?.picture?.[0]?.data),\r\n\t\tduration: data.meta.format.duration || 0,\r\n\t\tlive: false,\r\n\t\tservice: Service.audiofile,\r\n\t\taudio: [\r\n\t\t\t{\r\n\t\t\t\turl: data.url,\r\n\t\t\t\t// bitrate: data.meta.format.bitrate,\r\n\t\t\t\tmimeType: data.headers[\"content-type\"],\r\n\t\t\t\tprotocol: \"progressive\",\r\n\t\t\t\tduration: data?.meta?.format?.duration,\r\n\t\t\t\tcodec: data?.meta?.format?.codec,\r\n\t\t\t},\r\n\t\t],\r\n\t\tauthor: {\r\n\t\t\tname: data?.meta?.common?.artist || \"Not sure\",\r\n\t\t},\r\n\t\toriginalData: data,\r\n\t});\r\n}\r\n"]}