{"version":3,"file":"parse.js","sourceRoot":"","sources":["../../../src/services/YouTube/parse.ts"],"names":[],"mappings":";;;AAKA,mCAA+D;AAQ/D,SAAgB,qBAAqB,CAAC,IAAS;IAC9C,OAAO,IAAI,gBAAU,CAAC;QACrB,GAAG,EAAE,mCAAmC,IAAI,CAAC,OAAO,EAAE;QACtD,EAAE,EAAE,IAAI,CAAC,OAAO;QAChB,IAAI,EAAE,IAAI,CAAC,KAAK;QAEhB,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QACpC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,GAAG;QACtC,MAAM,EAAE;YACP,IAAI,EAAE,IAAI,CAAC,MAAM;YACjB,EAAE,EAAE,IAAI,CAAC,QAAQ;YACjB,GAAG,EAAE,2BAA2B,IAAI,CAAC,SAAS,EAAE;YAChD,MAAM,EAAE,IAAI,CAAC,gBAAgB;gBAC5B,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,gBAAgB,EAAE,MAAM,GAAG,CAAC,CAAC;gBAC3D,CAAC,CAAC,EAAE;SACL;QACD,KAAK,EAAE,IAAI,CAAC,eAAe;YAC1B,CAAC,CAAC,IAAI,CAAC,eAAe;iBACnB,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,IAAI,CAAC;iBAC1C,GAAG,CAAC,CAAC,CAAM,EAAE,EAAE;gBACf,OAAO;oBACN,GAAG,EAAE,CAAC,CAAC,GAAG;oBACV,OAAO,EAAE,CAAC,CAAC,YAAY;oBACvB,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9B,OAAO,EAAE,CAAC,CAAC,OAAO;iBAClB,CAAC;YACH,CAAC,CAAC;YACJ,CAAC,CAAC,IAAI;QACP,IAAI,EAAE,IAAI,CAAC,OAAO;QAClB,OAAO,EAAE,aAAO,CAAC,OAAO;QACxB,YAAY,EAAE,IAAI;KAClB,CAAC,CAAC;AACJ,CAAC;AAhCD,sDAgCC;AAKD,SAAgB,wBAAwB,CAAC,IAAS;AAKlD,CAAC;AALD,4DAKC","sourcesContent":["/**\r\n * Avoxel284 2022\r\n * Barbara Music Module / YouTube\r\n */\r\n\r\nimport { MusicPlaylist, MusicTrack, Service } from \"../../lib\";\r\nimport { debugLog, getSecondsFromTime, getTimeFromSeconds } from \"../../lib/util\";\r\nimport { Audio } from \"../../lib\";\r\n\r\n/**\r\n * Parse a MusicTrack from YouTube video page data.\r\n * Some code was ripped from play-dl\r\n */\r\nexport function MusicTrackFromYouTube(data: any) {\r\n\treturn new MusicTrack({\r\n\t\turl: `https://www.youtube.com/watch?v=${data.videoId}`,\r\n\t\tid: data.videoId,\r\n\t\tname: data.title,\r\n\t\t// description: videoData.shortDescription,\r\n\t\tduration: Number(data.lengthSeconds),\r\n\t\tthumbnail: data.videoThumbnails[0].url,\r\n\t\tauthor: {\r\n\t\t\tname: data.author,\r\n\t\t\tid: data.authorId,\r\n\t\t\turl: `https://www.youtube.com/${data.authorUrl}`,\r\n\t\t\tavatar: data.authorThumbnails\r\n\t\t\t\t? data.authorThumbnails[data?.authorThumbnails?.length - 1]\r\n\t\t\t\t: \"\",\r\n\t\t},\r\n\t\taudio: data.adaptiveFormats\r\n\t\t\t? data.adaptiveFormats\r\n\t\t\t\t\t.filter((f: any) => f.audioQuality != null)\r\n\t\t\t\t\t.map((f: any) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\turl: f.url,\r\n\t\t\t\t\t\t\tquality: f.audioQuality,\r\n\t\t\t\t\t\t\tmimeType: f.type.split(\";\")[0],\r\n\t\t\t\t\t\t\tbitrate: f.bitrate,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t: null,\r\n\t\tlive: data.liveNow,\r\n\t\tservice: Service.youtube,\r\n\t\toriginalData: data,\r\n\t});\r\n}\r\n\r\n/**\r\n * Parse a MusicPlaylist from YouTube playlist page.\r\n */\r\nexport function MusicPlaylistFromYouTube(data: any) {\r\n\t// return new MusicPlaylist({\r\n\t// \turl: \"\",\r\n\t// \tservice: Service.youtube,\r\n\t// });\r\n}\r\n"]}