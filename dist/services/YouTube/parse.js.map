{"version":3,"file":"parse.js","sourceRoot":"","sources":["../../../src/services/YouTube/parse.ts"],"names":[],"mappings":";;;AAKA,mCAA+D;AAQ/D,SAAgB,qBAAqB,CAAC,IAAS;IAC9C,OAAO,IAAI,gBAAU,CAAC;QACrB,GAAG,EAAE,mCAAmC,IAAI,CAAC,OAAO,EAAE;QACtD,EAAE,EAAE,IAAI,CAAC,OAAO;QAChB,IAAI,EAAE,IAAI,CAAC,KAAK;QAEhB,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QACpC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,GAAG;QACtC,MAAM,EAAE;YACP,IAAI,EAAE,IAAI,CAAC,MAAM;YACjB,EAAE,EAAE,IAAI,CAAC,QAAQ;YACjB,GAAG,EAAE,2BAA2B,IAAI,CAAC,SAAS,EAAE;YAChD,MAAM,EAAE,IAAI,CAAC,gBAAgB;gBAC5B,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,gBAAgB,EAAE,MAAM,GAAG,CAAC,CAAC;gBAC3D,CAAC,CAAC,EAAE;SACL;QACD,KAAK,EAAE,IAAI,CAAC,eAAe;YAC1B,CAAC,CAAC,IAAI,CAAC,eAAe;iBACnB,MAAM,CAAC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,IAAI,CAAC;iBAC1C,GAAG,CAAC,CAAC,CAAM,EAAE,EAAE;gBACf,OAAO;oBACN,GAAG,EAAE,CAAC,CAAC,GAAG;oBACV,OAAO,EAAE,CAAC,CAAC,YAAY;oBACvB,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9B,OAAO,EAAE,CAAC,CAAC,OAAO;iBAClB,CAAC;YACH,CAAC,CAAC;YACJ,CAAC,CAAC,IAAI;QACP,IAAI,EAAE,IAAI,CAAC,OAAO;QAClB,OAAO,EAAE,aAAO,CAAC,OAAO;QACxB,YAAY,EAAE,IAAI;KAClB,CAAC,CAAC;AACJ,CAAC;AAhCD,sDAgCC;AAKD,SAAgB,wBAAwB,CAAC,IAAS;AAKlD,CAAC;AALD,4DAKC","sourcesContent":["/**\n * Avoxel284 2022\n * Barbara Music Module / YouTube\n */\n\nimport { MusicPlaylist, MusicTrack, Service } from \"../../lib\";\nimport { debugLog, getSecondsFromTime, getTimeFromSeconds } from \"../../lib/util\";\nimport { Audio } from \"../../lib\";\n\n/**\n * Parse a MusicTrack from YouTube video page data.\n * Some code was ripped from play-dl\n */\nexport function MusicTrackFromYouTube(data: any) {\n\treturn new MusicTrack({\n\t\turl: `https://www.youtube.com/watch?v=${data.videoId}`,\n\t\tid: data.videoId,\n\t\tname: data.title,\n\t\t// description: videoData.shortDescription,\n\t\tduration: Number(data.lengthSeconds),\n\t\tthumbnail: data.videoThumbnails[0].url,\n\t\tauthor: {\n\t\t\tname: data.author,\n\t\t\tid: data.authorId,\n\t\t\turl: `https://www.youtube.com/${data.authorUrl}`,\n\t\t\tavatar: data.authorThumbnails\n\t\t\t\t? data.authorThumbnails[data?.authorThumbnails?.length - 1]\n\t\t\t\t: \"\",\n\t\t},\n\t\taudio: data.adaptiveFormats\n\t\t\t? data.adaptiveFormats\n\t\t\t\t\t.filter((f: any) => f.audioQuality != null)\n\t\t\t\t\t.map((f: any) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\turl: f.url,\n\t\t\t\t\t\t\tquality: f.audioQuality,\n\t\t\t\t\t\t\tmimeType: f.type.split(\";\")[0],\n\t\t\t\t\t\t\tbitrate: f.bitrate,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t: null,\n\t\tlive: data.liveNow,\n\t\tservice: Service.youtube,\n\t\toriginalData: data,\n\t});\n}\n\n/**\n * Parse a MusicPlaylist from YouTube playlist page.\n */\nexport function MusicPlaylistFromYouTube(data: any) {\n\t// return new MusicPlaylist({\n\t// \turl: \"\",\n\t// \tservice: Service.youtube,\n\t// });\n}\n"]}