{"version":3,"file":"parse.js","sourceRoot":"","sources":["../../../../src/lib/services/Spotify/parse.ts"],"names":[],"mappings":";;;AAKA,mCAA+D;AAG/D,SAAgB,qBAAqB,CAAC,IAAS;IAC9C,OAAO,IAAI,gBAAU,CAAC;QACrB,IAAI,EAAE,IAAI,CAAC,IAAI;QACf,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO;QAC/B,EAAE,EAAE,IAAI,CAAC,EAAE;QACX,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI;QACzC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,MAAW,EAAE,EAAE;YACxC,OAAO;gBACN,GAAG,EAAE,MAAM,CAAC,aAAa,CAAC,OAAO;gBACjC,IAAI,EAAE,MAAM,CAAC,IAAI;gBACjB,EAAE,EAAE,MAAM,CAAC,EAAE;aACb,CAAC;QACH,CAAC,CAAC;QACF,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;QACnC,OAAO,EAAE,aAAO,CAAC,OAAO;QACxB,QAAQ,EAAE,IAAI,CAAC,QAAQ;QACvB,YAAY,EAAE,IAAI;KAClB,CAAC,CAAC;AACJ,CAAC;AAlBD,sDAkBC;AAED,SAAgB,wBAAwB,CAAC,IAAS,EAAE,UAAmB,KAAK;IAC3E,OAAO,IAAI,mBAAa,CAAC;QACxB,IAAI,EAAE,IAAI,CAAC,IAAI;QACf,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO;QAC/B,EAAE,EAAE,IAAI,CAAC,EAAE;QACX,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI;QACzC,OAAO,EAAE;YACR,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO;YACrC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY;YAC7B,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE;SACjB;QACD,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;QAC5B,OAAO,EAAE,aAAO,CAAC,OAAO;QACxB,OAAO,EAAE,OAAO;QAGhB,MAAM,EAAE,IAAI,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAM,EAAE,EAAE;YACnC,qBAAqB,CAAC,CAAC,CAAC,CAAC;QAC1B,CAAC,CAAC;QACF,YAAY,EAAE,IAAI;KAClB,CAAC,CAAC;AACJ,CAAC;AArBD,4DAqBC","sourcesContent":["/**\r\n * Avoxel284 2022\r\n * Barbara Music Module / Spotify\r\n */\r\n\r\nimport { MusicPlaylist, MusicTrack, Service } from \"../../lib\";\r\nimport { getKey } from \"../../lib/config\";\r\n\r\nexport function MusicTrackFromSpotify(data: any) {\r\n\treturn new MusicTrack({\r\n\t\tname: data.name,\r\n\t\turl: data.external_urls.spotify,\r\n\t\tid: data.id,\r\n\t\tduration: Number(data.duration_ms) / 1000,\r\n\t\tauthor: data.artists.map((artist: any) => {\r\n\t\t\treturn {\r\n\t\t\t\turl: artist.external_urls.spotify,\r\n\t\t\t\tname: artist.name,\r\n\t\t\t\tid: artist.id,\r\n\t\t\t};\r\n\t\t}),\r\n\t\tthumbnail: data?.album?.images?.[0],\r\n\t\tservice: Service.spotify,\r\n\t\texplicit: data.explicit,\r\n\t\toriginalData: data,\r\n\t});\r\n}\r\n\r\nexport function MusicPlaylistFromSpotify(data: any, isAlbum: boolean = false) {\r\n\treturn new MusicPlaylist({\r\n\t\tname: data.name,\r\n\t\turl: data.external_urls.spotify,\r\n\t\tid: data.id,\r\n\t\tduration: Number(data.duration_ms) / 1000,\r\n\t\tauthors: {\r\n\t\t\turl: data.owner.external_urls.spotify,\r\n\t\t\tname: data.owner.display_name,\r\n\t\t\tid: data.owner.id,\r\n\t\t},\r\n\t\tthumbnail: data?.images?.[0],\r\n\t\tservice: Service.spotify,\r\n\t\tisAlbum: isAlbum,\r\n\t\t// TODO: possibly convert to map?\r\n\t\t// TODO: tracks in playlist- check api\r\n\t\ttracks: data?.tracks.map((d: any) => {\r\n\t\t\tMusicTrackFromSpotify(d);\r\n\t\t}),\r\n\t\toriginalData: data,\r\n\t});\r\n}\r\n"]}